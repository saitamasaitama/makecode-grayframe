<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id=".t_9!)a|foz;%t|w}M^H">bg</variable><variable id="9iXJ?RRC;lI+.AHaiI;t">long2</variable></variables><block type="pxt-on-start" id="cm[y(skOYukOr4];[)fp" x="0" y="0"><statement name="HANDLER"><block type="variables_set" id="9Ufd*G)zJk[#[FYuf=bz"><field name="VAR" id="9iXJ?RRC;lI+.AHaiI;t">long2</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="screen_image_picker" id="dS|a(LM$:+rqrTM[V;hR"><field name="img">img`
. 2 1 2 . 
1 2 3 2 1 
. 2 1 2 . 
`</field></block></value><next><block type="variables_set" id="#^$Uy.fy!#PSVenJ#te/"><field name="VAR" id=".t_9!)a|foz;%t|w}M^H">bg</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="gamebackgroundimage" id="[/%o]Ol,zaY51ND@X[j0"/></value><next><block type="typescript_statement" id="K@;qb8Rc@N#=lUt;cv2z" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const gray:Buffer=hex`000000111111222222333333444444555555666666777777888888999999aaaaaabbbbbbccccccddddddeeeeeeffffff`;" numlines="1" declaredvars="gray"></mutation><next><block type="typescript_statement" id="A-|YbJj3Q|n0QEv{lUls" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="image.setPalette(gray)" numlines="1"></mutation><next><block type="typescript_statement" id="0skH)u9}a12P_.Pk}N;_" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enum TYPE_OPERATION{" line1="    ADD," line2="    SET," line3="    MINUS" line4="}" numlines="5"></mutation><next><block type="typescript_statement" id="`oDzC3)ZcxU[.|t)Zx`K" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class grayFrame{" line1="    private buff:Image=img``;" line2="" line3="    public constructor(){" line4="        //this.buff=image.create(160,108)" line5="    }" line6="" line7="    //加算する" line8="    public static drawImage(src:Image,destx:number=0,desty:number=0,operation:TYPE_OPERATION =TYPE_OPERATION.ADD){" line9="        for (let y = 0; y &lt; src.width; y++){" line10="        for(let x=0;x&lt;src.width;x++){" line11="                const srcp:number = src.getPixel(x, y);" line12="                const destp: number = bg.getPixel(destx + x, desty + y);" line13="                " line14="                switch(operation){" line15="                    case TYPE_OPERATION.ADD:" line16="                        bg.setPixel(destx + x, desty + y, this.AddOperation(srcp, destp));" line17="                        break;" line18="                    default:break;" line19="                }" line20="" line21="                " line22="            }" line23="        }" line24="    }" line25="" line26="    private static AddOperation(a:number,b:number){return Math.min(a+b,0xf);}" line27="    private static MinusOperation(a: number, b: number){return Math.max(a-b,0x1)}" line28="    private static SetOperation(a: number, b: number) {return b;}" line29="" line30="}" numlines="31"></mutation></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="gameupdate" id="/7LQyah+bG;wm|DxKTPP" x="508" y="0"><statement name="HANDLER"><block type="Image_drawRect" id="+7(IL}QH0xH/aYq/C;f0"><value name="picture"><shadow type="variables_get" id="1,iy=IxH:YSM9FlZDbvG"><field name="VAR" id=".t_9!)a|foz;%t|w}M^H">bg</field></shadow></value><value name="x"><block type="device_random" id="63bBiUGc~*0Y5W%iDZ;)"><value name="min"><shadow type="math_number" id="=KC-Vz9AIxSD*@?l*81#"><field name="NUM">0</field></shadow></value><value name="limit"><shadow type="math_number" id="$ivi%|sb5WG;m8zXk!nn"><field name="NUM">160</field></shadow></value></block></value><value name="y"><shadow type="math_number" id="i4tl?f9-U[@],+yz(5l)"><field name="NUM">0</field></shadow></value><value name="w"><shadow type="math_number" id="*GdEO~V#qU!V7fVrYJjE"><field name="NUM">20</field></shadow></value><value name="h"><shadow type="math_number" id="8@]UJgf5EA+,{sAu5q)u"><field name="NUM">20</field></shadow></value><value name="c"><shadow type="colorindexpicker"/><block type="device_random" id="$-PswjcN?hFF=#;DT4S!"><value name="min"><shadow type="math_number" id="~x7;hv,wM_-Z~B9H?*zF"><field name="NUM">1</field></shadow></value><value name="limit"><shadow type="math_number" id="5-W]78wUcsvzvD4:(K2L"><field name="NUM">15</field></shadow></value></block></value><next><block type="controls_repeat_ext" id="AjouGzpL+,+}R7}_]ci;"><value name="TIMES"><shadow type="math_whole_number" id="1jY5*YmKB#AKW~XUv{-e"><field name="NUM">80</field></shadow></value><statement name="DO"><block type="typescript_statement" id="m3802*-[/Yp9Y~WY*Uym" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="grayFrame.drawImage(long2, Math.randomRange(0, 160), Math.randomRange(0, 120))" numlines="1"></mutation></block></statement></block></next></block></statement></block></xml>